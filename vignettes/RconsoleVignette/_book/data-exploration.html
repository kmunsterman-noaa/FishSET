<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Data Exploration | Using FishSET in the RConsole</title>
  <meta name="description" content="3 Data Exploration | Using FishSET in the RConsole" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Data Exploration | Using FishSET in the RConsole" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Data Exploration | Using FishSET in the RConsole" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data.html"/>
<link rel="next" href="spatial-functions.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to FishSET</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#getting-started"><i class="fa fa-check"></i><b>1.2</b> Getting started</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#what-is-a-project"><i class="fa fa-check"></i><b>1.3</b> What is a project?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#chapter-overview"><i class="fa fa-check"></i><b>1.4</b> Chapter overview</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#chapter-2-data"><i class="fa fa-check"></i><b>1.4.1</b> Chapter 2 <span>Data</span></a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#chapter-3-data-exploration"><i class="fa fa-check"></i><b>1.4.2</b> Chapter 3 <span>Data Exploration</span></a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#chapter-4-spatial-functions"><i class="fa fa-check"></i><b>1.4.3</b> Chapter 4 <span>Spatial Functions</span></a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#chapter-5-creating-and-modifying-data"><i class="fa fa-check"></i><b>1.4.4</b> Chapter 5 <span>Creating and Modifying Data</span></a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#chapter-6-modeling-functions"><i class="fa fa-check"></i><b>1.4.5</b> Chapter 6 <span>Modeling Functions</span></a></li>
<li class="chapter" data-level="1.4.6" data-path="index.html"><a href="index.html#chapter-7-policy-and-welfare-analysis"><i class="fa fa-check"></i><b>1.4.6</b> Chapter 7 <span>Policy and Welfare Analysis</span></a></li>
<li class="chapter" data-level="1.4.7" data-path="index.html"><a href="index.html#chapter-8-reporting"><i class="fa fa-check"></i><b>1.4.7</b> Chapter 8 <span>Reporting</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#required-and-optional-data"><i class="fa fa-check"></i><b>2.1</b> Required and optional data</a></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#loading-and-reading-data"><i class="fa fa-check"></i><b>2.2</b> Loading and reading data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data.html"><a href="data.html#loading-data-to-the-fishset-database"><i class="fa fa-check"></i><b>2.2.1</b> Loading data to the FishSET database</a></li>
<li class="chapter" data-level="2.2.2" data-path="data.html"><a href="data.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.2.2</b> Reading data into R</a></li>
<li class="chapter" data-level="2.2.3" data-path="data.html"><a href="data.html#loading-data-from-fishset-database-into-the-the-working-environment"><i class="fa fa-check"></i><b>2.2.3</b> Loading data from FishSET database into the the working environment</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#merging-gridded-and-auxiliary-data-with-the-primary-data"><i class="fa fa-check"></i><b>2.3</b> Merging gridded and auxiliary data with the primary data</a></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#working-in-the-fishset-database"><i class="fa fa-check"></i><b>2.4</b> Working in the FishSET database</a></li>
<li class="chapter" data-level="2.5" data-path="data.html"><a href="data.html#metadata"><i class="fa fa-check"></i><b>2.5</b> Metadata</a></li>
<li class="chapter" data-level="2.6" data-path="data.html"><a href="data.html#data-management-functions"><i class="fa fa-check"></i><b>2.6</b> Data management functions</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="data.html"><a href="data.html#functions-2"><i class="fa fa-check"></i><b>2.6.1</b> Functions</a></li>
<li class="chapter" data-level="2.6.2" data-path="data.html"><a href="data.html#function-details-3"><i class="fa fa-check"></i><b>2.6.2</b> Function details</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-exploration.html"><a href="data-exploration.html"><i class="fa fa-check"></i><b>3</b> Data Exploration</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-exploration.html"><a href="data-exploration.html#data-exploration-functions"><i class="fa fa-check"></i><b>3.1</b> Data Exploration functions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="spatial-functions.html"><a href="spatial-functions.html"><i class="fa fa-check"></i><b>4</b> Spatial Functions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="spatial-functions.html"><a href="spatial-functions.html#mapping-functions"><i class="fa fa-check"></i><b>4.1</b> Mapping functions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="creating-and-modifying-data.html"><a href="creating-and-modifying-data.html"><i class="fa fa-check"></i><b>5</b> Creating and Modifying Data</a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="creating-and-modifying-data.html"><a href="creating-and-modifying-data.html#data-transformation-and-derivation-functions"><i class="fa fa-check"></i><b>5.0.1</b> Data transformation and derivation functions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="modeling-functions.html"><a href="modeling-functions.html"><i class="fa fa-check"></i><b>6</b> Modeling Functions</a>
<ul>
<li class="chapter" data-level="6.1" data-path="modeling-functions.html"><a href="modeling-functions.html#modeling-functions-1"><i class="fa fa-check"></i><b>6.1</b> Modeling functions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="policy-and-welfare-analysis.html"><a href="policy-and-welfare-analysis.html"><i class="fa fa-check"></i><b>7</b> Policy and Welfare Analysis</a></li>
<li class="chapter" data-level="8" data-path="reporting.html"><a href="reporting.html"><i class="fa fa-check"></i><b>8</b> Reporting</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Using FishSET in the RConsole</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-exploration" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Data Exploration<a href="data-exploration.html#data-exploration" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Several functions are available for summarizing and visualizing data.</p>
<p>We group exploratory data functions into 1) basic exploratory analysis - functions exploring the distribution, availability, and variance of data, 2) fleet summaries – functions to view and understand fleets and identify meaningful groupings, and 3) simple analyses - functions to evaluate relationships between variables and identify redundant variables.</p>
<p>All output is saved to the output folder.</p>
<div id="data-exploration-functions" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Data Exploration functions<a href="data-exploration.html#data-exploration-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Basic exploratory analysis</p>
<pre><code>map_kernel()      Spatial kernel density plot.  
getis_ord_stats() Getis-Ord statistic.  
morans_stats()    Moran’s I statistic.  
map_plot()        Static map of haul locations. 
map_viewer()      Interactive map of haul locations or paths with zone. 
spatial_summary() View aggregated variable by date and fishing zone.    
spatial_hist()    Assess spatial variance/clumping of grouping variable.    
temp_plot()       View distribution of variable over time.  </code></pre>
<p>Fleet summaries</p>
<pre><code>vessel_count()    Counts of unique vessels active within a specified period.
species_catch()   Aggregates total catch for one or more species. 
weekly_catch()    Calculates weekly catch for one or more species.
weekly_effort()   Generates the average CPUE by week. 
density_plot()    Plots the chosen density plot of chosen variable.
bycatch()         Compares mean CPUE and share (or count) of total catch by time period.
roll_catch()      Rolling catch (specify window size and summary statistic).    
trip_length()     View trip duration.   </code></pre>
<p>Simple analyses</p>
<pre><code>corr_out()        View the correlation coefficient between numeric variables.   
xy_plot()         Asses fitted relationship between two variables.  </code></pre>
<p>All tables and plots generated are saved to the output folder.</p>
<p>###Function details</p>
<p><code>map_kernel(dat, project, type, latlon, group, facet, date, filter_date, filter_value, minmax)</code> returns the kernel density plot in the specified plot <code>type</code> (<em>“point”</em>, <em>“contours”</em>, <em>“gradient”</em>) based on the specified latitude and longitude variables (<code>latlon</code>). All other arguments are optional. <code>group</code> is the variable in <code>dat</code> containing group identifiers. If groups are specified, users can map each group as a separate facet if <code>facet = TRUE</code>. Data can be filtered by a <code>date</code> variable. Select how to filter using <code>filter_date</code> and values with <code>filter_value</code>. <code>filter_date</code> options are <em>“year”</em>, <em>“month”</em>, and <em>“year-month”</em>. <code>filter_value</code> should be four digits if year and 2 digits if month. Use colon for a range. Use a list if using <em>“year-month”</em>, with the format: <em>list(year(s), month(s))</em>. For example, <em>list(2011:2013, 5:7)</em>. Use <code>minmax</code> to limit the map extent. <code>minmax</code> is a vector of length four corresponding to c(minlat, maxlat, minlon, maxlon).<br />
<br>
<code>getis_ord_stats(dat, project, varofint, spat, lon.dat, lat.dat, cat, lon.grid, lat.grid)</code> is a wrapper function to calculate global and local Getis-Ord (the degree, within each zone, that high or low values of the <code>varofint</code> cluster in space) by discrete area. Function utilizes the <code>localG</code> and <code>knearneigh</code> functions from the <strong>spdep</strong> package. The spatial input is a row-standardized spatial weights matrix for computed nearest neighbor matrix, which is the null setting for the <code>nb2listw</code> function. Requires a data frame with area as a factor, the lon/lat centroid for each area, the lon/lat outlining each area, and the variable of interest <code>varofint</code> or a spatial data file with lon/lat defining boundaries of area/zones and variable of interest for weighting. If the centroid is not included in the spatial data file, then <code>find_centroid()</code> can be called to calculate the centroid of each zone. If the variable of interest is not associated with an area/zone then the <code>assignment_column()</code> function can be used to assign each observation to a zone. Arguments to identify centroid and assign variable of interest to area/zone are optional and default to NULL.<br />
<br>
<code>morans_stats(dat, project, varofint, spat, lon.dat, lat.dat = NULL, cat, lon.grid, lat.grid)</code> is a wrapper function to calculate global and local Moran’s I (degree of spatial autocorrelation) of a variable (<code>varofint</code>) by discrete area. Function utilizes the <code>localmoran()</code> and <code>knearneigh()</code> functions from the <strong>spdep</strong> package. The spatial input is a row-standardized spatial weights matrix for computed nearest neighbor matrix, which is the null setting for the <code>nb2listw()</code> function. The function requires a spatial data file with latitude and longitude defining boundaries of area/zones. If zonal centroid is not included in the spatial data file, then FishSET’s <code>find_centroid()</code> function is called. If each observation in <code>dat</code> is not associated with an area/zone, then FishSET’s <code>assignment_column()</code> is called to assign each observation to a zone. Arguments to identify zonal centroids and assign variable of interest to area/zone are optional and default to NULL.<br />
<br>
<code>map_plot(dat, project, lat, lon, minmax, percshown)</code> plots observed vessel locations on a map. <code>lon</code> and <code>lat</code> are the names of variables containing longitude and latitude data in dat. If the predefined map extent needs adjusting, set limits with <code>minmax = c(minlat, maxlat, minlon, maxlon)</code>. To show a random subset of points, set <code>percshown</code> to the percent of points to show. Please consider any confidentiality concerns before sharing or publishing the map. This graphic return a static but shareable map. See <code>map_viewer()</code> to view a dynamic map with greater functionality.<br />
<br>
<code>map_viewer(dat, gridfile, avd, avm, num_vars, temp_vars, id_vars, lon_start, lat_start, lon_end, lat_end)</code> opens an interactive map in your default web browser to view vessel points or maps. <code>gridfile</code> is required to overlay fishery management/regulatory zones on the map. <code>dat</code> and <code>gridfile</code> are linked through <code>avd</code> (variable in <code>dat</code> containing zone name or identifier) and <code>avm</code> (property in <code>gridfile</code> containing zone name or identifier). Vessel haul points or vessel haul paths can be plotted. <code>lon_start</code> and <code>lat_start</code> are the variable names in <code>dat</code> containing the longitude and latitude of the vessel location points to plot or starting location if plotting paths. <code>lon_end</code> and <code>lat_end</code> are the ending latitude and longitudes if plotting a path. Leave as NULL if plotting location points. Other plotting and grouping arguments include <code>num_vars</code> (a list of one or more numeric variables in <code>dat</code>), <code>temp_vars</code> (a list of one or more temporal variables in <code>dat</code>), and <code>id_var</code>s (a list of categorical variables in <code>dat</code>). These variables are used to create additional scatter plots for assessing the data. Multiple numeric, temporal, and ID variables can be included but only one will be shown at a time. To close the server connection run <code>servr::daemon_stop()</code> in the console. Note that it can take up to a minute for the data to be loaded onto the map. The map cannot be saved.<br />
<br>
<code>spatial_summary(dat, project, stat.var, variable, gridfile, lon.grid, lat.grid, lon.dat, lat.dat, cat)</code> returns the variable aggregated by <code>stat.var</code> plotted against date and zone. <code>gridfile</code>, <code>lon.grid</code>, <code>lat.grid</code>, <code>lon.dat</code>, <code>lat.dat</code>, and <code>cat</code> are not required if zone assignment variable exists in <code>dat</code>.</p>
<p><code>stat.var</code> options</p>
<pre><code>length         Number of observations
no_unique_obs  Number of unique observations
perc_total     Percent of total observations
mean           Mean  
median         Median  
min            Minimum  
max            Maximum  
sum            Sum</code></pre>
<p><br></p>
<p><code>spatial_hist(dat, project, group)</code> returns a histogram of observed lon/lat split by grouping variable (<code>group</code>). The function is used to assess spatial variance/clumping of selected grouping variable.</p>
<p><code>temp_plot(dat, project, var.select, len.fun, agg.fun, date.var)</code> returns two plots of selected variable <code>var.select</code> over time (<code>date.var</code>). The first plot can show the number of observations (<code>len.fun = "length"</code>), number of unique observations (<code>len.fun = "unique"</code>), percent of options (<code>len.fun = "percent"</code>) of <code>var.select</code> by time. The second plot shows <code>var.select</code> aggregated by <code>agg.fun</code> against date. <code>agg.fun</code> options are <em>mean</em>, <em>median</em>, <em>min</em>, <em>max</em>, and <em>sum</em>.</p>
<p><strong>Fleet and group summaries</strong></p>
<p>Each function has a different objective but they all have a set of optional arguments that allow for grouping the data (<code>group</code>) or filtering by date (<code>filter_date</code>) or another value (<code>filter_value</code>). These options default to NULL and do not have to be specified. There are additional options to adjust the appearance of the output. These options are detailed first; then the functions are detailed.</p>
<dl>
<dt><em>Additional options</em></dt>
<dd><p><code>group</code> is the name of the fleet ID variable or other grouping variable(s). Multiple group variables can be included but only the first two will be shown. For most variables, grouping variables can be merged into one variable using <code>combine</code>; in this case any number of variables can be joined, but no more than three is recommended. For functions that do not have the <code>combine</code> argument, group variables will be automatically combined if three or more are included.</p>
</dd>
<dd><p><code>date</code> is the variable name from <code>dat</code> used to subset and/or facet the plot by.</p>
</dd>
<dd><p><code>filter_date</code> is the type of filter to apply to the table. Options include <em>“date_range”</em>, <em>“year-day”</em>, <em>“year-week”</em>, <em>“year-month”</em>, <em>“year”</em>, <em>“month”</em>, <em>“week”</em>, or <em>“day”</em>. The <em>“date_range”</em> option will subset the data by two date values entered in <code>date_value</code>. The argument <code>date_value</code> must be provided.</p>
</dd>
<dd><p><code>date_value</code> is the value to filter <code>date</code> by. If using <code>filter_date = "date_range"</code>, <code>date_value</code> should contain a start and end date, e.g. c(“2011-01-01”, “2011-03-15”). Otherwise, use integers (4 digits if <em>year</em>, 1-2 digits if <em>day</em>, <em>month</em>, or <em>week</em>). Use a list if using a two-part filter, e.g. “year-week”, with the format <code>list(year, week)</code> or a vector if using a single period, <code>c(week)</code>. For example, <code>list(2011:2013, 5:7)</code> will filter the data table from weeks 5 through 7 for years 2011-2013 if <code>filter_date = "year-week"</code>. <code>c(2:5)</code> will filter the data February through May when <code>filter_date = "month"</code>.</p>
</dd>
<dd><p><code>filter_by</code> is the variable name to filter <code>dat</code> by.</p>
</dd>
<dd><p><code>filter_value</code> is a vector of values in the <code>filter_by</code> variable to filter <code>dat</code>.</p>
</dd>
<dd><p><code>filter_expr</code> a valid R expression to filter <code>dat</code> by using the <code>filter_by</code> variable.</p>
</dd>
<dd><p><code>facet_by</code> is the variable name to facet by. This can be a variable that exists in the dataset, or a variable created by the function such as <em>“year”</em>, <em>“month”</em>, or <em>“week”</em>. For faceting, any variable (including ones listed in <code>group</code>) can be used, but <em>“year”</em> and <em>“month”</em> are also available. Currently, combined variables cannot be faceted.</p>
</dd>
<dd><p><code>tran</code> is the name of function to transform variable by. Options include <em>“identity”</em>, <em>“log”</em>, <em>“log2”</em>, <em>“log10”</em>, and <em>“sqrt”</em>. <em>“identify”</em> (no transformation) is the default.</p>
</dd>
<dd><p><code>scale</code> is passed to facet_grid defining whether x- and y-axes should be consistent across plots. Defaults to <em>“fixed”</em>. Other options include <em>“free_y”</em>, <em>“free_x”</em>, and <em>“free”</em>.</p>
</dd>
<dd><p><code>position</code> The position of the grouped variable for the plot. Options include <em>“identity”</em>, <em>“stack”</em>, and <em>“fill”</em>.</p>
</dd>
<dd><p><code>output</code> display as <em>“plot”</em>, <em>“table”</em>, or both (<em>“tab_plot”</em>). Defaults to both.</p>
</dd>
<dd><p><code>format_tab</code> defines how table output should be formatted. Options include <em>“wide”</em> (the default) and <em>“long”</em>.</p>
</dd>
</dl>
<p><br>
<em>Function details</em></p>
<p><code>vessel_count(dat, project,  v_id, date, period, group, filter_date,  date_value, filter_by, filter_value,  filter_expr, facet_by, combine, position,  tran,  value, type,  scale, output)</code> aggregates the number (or percent) of active vessels by time period (<code>period</code>) using a column of unique vessel IDs (<code>v_id</code>). <code>period</code> options include <em>“year”</em>, <em>“month”</em>, <em>“weeks”</em> (weeks in the year), <em>“weekday”</em>, <em>“weekday_abv”</em>, <em>“day”</em> (day of the month), and <em>“day_of_year”</em>.<br />
<br>
<code>species_catch(dat, project, species, date, period, fun, group, filter_date, date_value, filter_by, filter_value, filter_expr, facet_by, type, conv, tran, value, position, combine, scale, output, format_tab)</code> aggregates catch by time period (<code>period</code>) and species using one or more columns of catch data (<code>species</code>). <code>fun</code> is the name of the function to aggregate catch by. Defaults to <em>“sum”</em>. Use <code>conv</code> to convert catch that is in pounds to <em>“tons”</em> or <em>“metric_tons”</em>. Set <code>conv = "none"</code> if no conversion is desired. Alternative, <code>conv</code> can be a user-defined function. This is useful if catch is not in pounds.<br />
<br>
<code>roll_catch(dat, project, catch, date, group, k = 10, fun, filter_date, date_value, filter_by, filter_value, filter_expr, facet_by, scale, align, conv, tran, output, ...)</code> returns a rolling window time series aggregation of catch that can be combined with grouping variable(s) (<code>group</code>). <code>catch</code> can be one or more columns of catch data. <code>k</code> defines the window size and <code>fun</code> is the name of the function to aggregate catch by. Defaults to <em>“mean”</em>. <code>align</code> indicates whether results of window should be left-aligned <em>(“left”)</em>, right-aligned <em>(“right”)</em>, or centered <em>(“center”)</em>. Defaults to <em>“center”</em>. Use <code>conv</code> to convert catch that is in pounds to “tons” or “metric_tons”. Alternative, conv can be a user-defined function. This is useful if catch is not in pounds.<br />
<br>
<code>weekly_catch(dat, project, species, date, fun, group, filter_date, date_value, filter_by, filter_value, filter_expr, facet_by, type, conv, tran, value, position, combine, scale, output, format_tab)</code> aggregates catch by week using one or more columns of catch data (<code>species</code>). <code>fun</code> is the name of the function to aggregate catch by. Defaults to <em>“sum”</em>. Use <code>conv</code> to convert catch that is in pounds to <em>“tons”</em> or <em>“metric_tons”</em>. Alternatively, <code>conv</code> can be a user-defined function. This is useful if catch is not in pounds.<br />
<br>
<code>weekly_effort(dat, project, cpue, date, group, filter_date, date_value, filter_by, filter_value, filter_expr, facet_by, tran, combine, scale, output, format_tab)</code> calculates mean CPUE by week. This function doesn’t calculate CPUE; the CPUE variable must be created in advance. One or more CPUE variables can be included.<br />
<br>
<code>bycatch(dat, project, cpue, catch, date, period, names, group, filter_date, date_value, filter_by, filter_value, filter_expr, facet_by, tran, value, combine, scale, output, format_tab)</code> compares the average CPUE and catch total/share of total catch between one or more species. If including multiple species, <code>cpue</code>, <code>catch</code>, and <code>names</code> should be strings and species should be listed in the same order. <code>names</code> is an optional string of species names that will be used in the plot. If <code>names = NULL</code>, then species names from catch will be used. <code>period</code> is the time period to aggregate by. Options include <em>“year”</em>, <em>“month”</em>, and <em>“weeks”</em>. <code>value</code> defines whether to return raw catch <em>(“raw”)</em> or share of total catch <em>(“stc”)</em>.<br />
<br>
<code>trip_dur_out(dat, project, start, end, units, catch, hauls, group, filter_date, date_value, filter_by, filter_value, filter_expr, facet_by, type, bins = 30, density, scale, tran, pages, remove_neg, output, tripID, fun.time, fun.numeric)</code> calculates vessel trip duration in the desired unit of time given start and end dates. Obsevations with a negative trip duration can be removed from output using <code>remove_neg = TRUE</code>. If data is not at a trip level (each row is a unique trip), specify trip identifiers (<code>tripID</code>) and how to collapse data (<code>fun.time</code> and <code>fun.numeric</code>). You can also calculate CPUE and hauls per unit of time by specifying <code>catch</code> and <code>hauls</code>. Plot output can be a histogram (<code>type = “hist”</code>) or a frequency polygon (<code>type = "freq_poly"</code>). Plot output can be combined on a single page (<code>pages = "single"</code>) or printed on individual pages (<code>pages = "multi"</code>).<br />
<br>
<code>density_plot(dat, project, var, type, group, date, filter_date, date_value, filter_by, filter_value, filter_expr, facet_by, tran, scale="fixed", bw, position)</code> returns a kernel density estimate, cumulative distribution function, or empirical cdf of selected variable. <code>type</code> options are <em>“kde”</em>, <em>“cdf”</em>, and <em>“ecdf”</em>. The <code>group</code> and <code>tran</code> arguments are not applied to the CDF plot.</p>
<p><strong>View relationships</strong></p>
<p><code>corr_out(dat, project, variables, ...)</code> returns the correlation coefficient between numeric variables in <code>dat</code>. <code>variables</code> can be all numeric variables in <code>dat</code> (<code>variables = “all”</code>) or a list of column names of selected variables. Additional arguments can be added, such as the method to calculate correlation coefficients. The function defaults to displaying the Pearson correlation coefficient. To change the method, specify <code>method = ‘kendall’</code> or <code>method = ‘spearman’</code>.<br />
<br>
<code>xy_plot(dat, project, var1, var2, regress = FALSE)</code> returns the fitted relationship between two variables. <code>var1</code> and <code>var2</code> are names of variables in <code>dat</code>. <code>regress = TRUE</code> returns the plot with the fitted linear regression line.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="spatial-functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
